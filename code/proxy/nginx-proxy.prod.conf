server {
    # Listen to port 443 on both IPv4 and IPv6.
    listen 443 ssl default_server reuseport;
    listen [::]:443 ssl default_server reuseport;

    # Domain names this server should respond to.
    server_name gallery.luchsphoto.ch;

    # Load the certificate files.
    ssl_certificate         /etc/letsencrypt/live/test-name/fullchain.pem;
    ssl_certificate_key     /etc/letsencrypt/live/test-name/privkey.pem;
    ssl_trusted_certificate /etc/letsencrypt/live/test-name/chain.pem;

    # Load the Diffie-Hellman parameter.
    ssl_dhparam /etc/letsencrypt/dhparams/dhparam.pem;

    location / {
        proxy_pass http://eventgallery-frontend:3000;
    }    
    
    location /api {
        proxy_pass http://eventgallery-backend:5000/api;
    }
    error_page 404 /404.html;
    error_page 500 502 503 504 /500.html;

    location = /404.html {
        root /usr/share/nginx/html;
        internal;
}

    location = /500.html {
        root /usr/share/nginx/html;
        internal;
}
}